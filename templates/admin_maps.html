
{% extends "base.html" %}
{% block content %}
  <h2>Mapas</h2>
  <h3>Enviar novo PDF</h3>
  <form method="post" enctype="multipart/form-data">
    <label>Título <input name="title" placeholder="Ex.: Mapa Hub Central 07/2025" required></label>
    <label>Arquivo PDF <input type="file" name="pdf" accept="application/pdf" required></label>
    <button type="submit">Enviar</button>
  </form>

  <h3>Mapas existentes</h3>
  <ul>
    {% for m in maps %}
      <li>#{{m.id}} — {{m.title}} ({{m.filename}})</li>
    {% else %}
      <li><em>Nenhum mapa enviado ainda.</em></li>
    {% endfor %}
  </ul>

  <h3>Atribuir acesso</h3>
  <form method="post" action="{{ url_for('admin_maps_assign') }}">
    <label>Usuário
      <select name="user_id">
        {% for u in users %}
          <option value="{{u.id}}">{{u.name}} ({{u.email}})</option>
        {% endfor %}
      </select>
    </label>
    <label>Mapa
      <select name="map_id">
        {% for m in maps %}
          <option value="{{m.id}}">{{m.title}}</option>
        {% endfor %}
      </select>
    </label>
    <label>Ação
      <select name="action">
        <option value="grant">Conceder</option>
        <option value="revoke">Revogar</option>
      </select>
    </label>
    <button type="submit">Aplicar</button>
  </form>
{% endblock %}
