{% extends 'base.html' %}
{% block content %}
<h4>Mapas de Trabalho (PDF)</h4>
<form method="post" enctype="multipart/form-data" class="card p-3 mb-3">
  <div class="row g-2">
    <div class="col-md-6"><input class="form-control" name="title" placeholder="Título" required></div>
    <div class="col-md-6"><input class="form-control" type="file" name="pdf" accept="application/pdf" required></div>
  </div>
  <button class="btn btn-primary mt-2">Adicionar mapa</button>
</form>
<table class="table table-sm">
<thead><tr><th>Título</th><th>Download</th></tr></thead>
<tbody>{% for m in maps %}<tr><td>{{ m.title }}</td><td><a class="btn btn-sm btn-outline-secondary" href="{{ url_for('download_map', map_id=m.id) }}">Baixar</a></td></tr>{% else %}<tr><td colspan="2">Nenhum mapa</td></tr>{% endfor %}</tbody>
</table>
<h5 class="mt-4">Atribuir mapa a usuários</h5>
<form method="post" action="{{ url_for('admin_map_assign') }}" class="card p-3">
  <div class="row g-2">
    <div class="col-md-4">
      <select class="form-select" name="map_id" required>{% for m in maps %}<option value="{{ m.id }}">{{ m.title }}</option>{% endfor %}</select>
    </div>
    <div class="col-md-8">
      <select class="form-select" name="user_ids" multiple size="6" required>
        {% for u in users %}<option value="{{ u.id }}">{{ u.username }}</option>{% endfor %}
      </select>
    </div>
  </div>
  <button class="btn btn-primary mt-2">Atribuir</button>
</form>
{% endblock %}
